!function(L){"use strict";var y="ht",i=L[y],j=Math,N=j.max,s=j.min,G=j.abs,E=j.atan2,o=(j.cos,j.sin,j.ceil),O=i.Default,F=O.getInternal(),K=i.List,v=F.Mat,A=F.getNodeRect,u=F.intersectionLineRect,X=O.getDistance,h=O.setEdgeType,W="left",f="right",c="top",U="bottom",l="edge.type",D="edge.gap",m="edge.center",P="edge.extend",M=function(n,b){return A(n,b).width},H=function(L,D){return A(L,D).height},T=function(e,m){return F.getEdgeAgentPosition(e,m._40I,m.s("edge.source.position"),m.s("edge.source.offset.x"),m.s("edge.source.offset.y"),m.s("edge.source.anchor.x"),m.s("edge.source.anchor.y"))},w=function(R,P){return F.getEdgeAgentPosition(R,P._41I,P.s("edge.target.position"),P.s("edge.target.offset.x"),P.s("edge.target.offset.y"),P.s("edge.target.anchor.x"),P.s("edge.target.anchor.y"))},$=function(i,m){var L=i.s(l),V=i.getEdgeGroup();if(V){var H=0;if(V.eachSiblingEdge(function(f){m.isVisible(f)&&f.s(l)==L&&H++}),H>1)return i.s(D)*(H-1)/2}return 0},e=function(e,A){var o=e.s(l),P=e.isLooped();if(!e.getEdgeGroup())return P?e.s(D):0;var v,i=0,H=0,U=0;return e.getEdgeGroup().getSiblings().each(function(J){J.each(function(m){if(m._40I===e._40I&&m.s(l)==o&&A.isVisible(m)){var X=m.s(D);v?(H+=U/2+X/2,U=X):(v=m,U=X),m===e&&(i=H)}})}),P?H-i+U:i-H/2},z=function(M,P){var g=P.s("edge.corner.radius");return O.toRoundedCorner(M,g)};F.addMethod(i.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),h("boundary",function(m,r,j,a){a||(r=-r);var h,e=T(j,m),O=w(j,m),q=A(j,m._40I),S=A(j,m._41I),G=new v(E(O.y-e.y,O.x-e.x)),B=X(e,O),d=e.x,D=e.y;return h=G.tf(0,r),e={x:h.x+d,y:h.y+D},h=G.tf(B,r),O={x:h.x+d,y:h.y+D},h=u(e,O,q),h&&(e={x:h[0],y:h[1]}),h=u(e,O,S),h&&(O={x:h[0],y:h[1]}),{points:new K([e,O])}}),h("ripple",function(g,$,l,e){e||($=-$);var L=T(l,g),M=w(l,g),t=X(L,M),h=s(g.s("edge.offset"),t/2),d=g.s("edge.ripple.size"),n=g.s("edge.ripple.length"),H=g.s("edge.ripple.both"),Z=g.s(m),S=g.s("edge.ripple.elevation"),D=new K,A=g.s("edge.ripple.straight")?null:new K,q=new v(E(M.y-L.y,M.x-L.x));e||(S=-S),t-=2*h,n>0&&(d=o(t/n));var R=t/d;A&&A.add(1);for(var V=0;d>V;V++)A&&A.add(3),0===V?D.add({x:h+R*V,y:Z?0:$}):D.add({x:h+R*V,y:$}),D.add({x:h+R*V+R/2,y:S+$}),H&&(S=-S);for(D.add({x:h+t,y:Z?0:$}),V=0;V<D.size();V++){var u=q.tf(D.get(V));u.x+=L.x,u.y+=L.y,D.set(V,u)}return{points:D,segments:A}}),h("h.v",function(y,N,R){N=e(y,R);var Q=new K,o=y.s(m),t=T(R,y),h=t.x,I=t.y,O=w(R,y),G=O.x,g=O.y,$=0,k=0,l=G-h,p=g-I;return o||($=M(R,y._40I)/2,k=H(R,y._41I)/2),l>=0&&0>=p?(Q.add({x:h+$,y:I+N}),Q.add({x:G+N,y:I+N}),Q.add({x:G+N,y:g+k})):0>=l&&p>=0?(Q.add({x:h-$,y:I+N}),Q.add({x:G+N,y:I+N}),Q.add({x:G+N,y:g-k})):l>=0&&p>=0?(Q.add({x:h+$,y:I+N}),Q.add({x:G-N,y:I+N}),Q.add({x:G-N,y:g-k})):(Q.add({x:h-$,y:I+N}),Q.add({x:G-N,y:I+N}),Q.add({x:G-N,y:g+k})),z(Q,y)}),h("v.h",function(q,A,P){A=e(q,P);var h=new K,k=q.s(m),b=T(P,q),U=b.x,o=b.y,J=w(P,q),f=J.x,O=J.y,V=0,n=0,G=f-U,u=O-o;return k||(V=M(P,q._41I)/2,n=H(P,q._40I)/2),G>=0&&0>=u?(h.add({x:U+A,y:o-n}),h.add({x:U+A,y:O+A}),h.add({x:f-V,y:O+A})):0>=G&&u>=0?(h.add({x:U+A,y:o+n}),h.add({x:U+A,y:O+A}),h.add({x:f+V,y:O+A})):G>=0&&u>=0?(h.add({x:U-A,y:o+n}),h.add({x:U-A,y:O+A}),h.add({x:f-V,y:O+A})):(h.add({x:U-A,y:o-n}),h.add({x:U-A,y:O+A}),h.add({x:f+V,y:O+A})),z(h,q)}),h("ortho",function(R,n,A){var W=new K,F=R.s(m),N=R.s("edge.ortho"),J=R._40I,o=R._41I,b=T(A,R),D=b.x,C=b.y,v=w(A,R),I=v.x,r=v.y,O=I-D,x=r-C,B=F?0:M(A,J)/2,k=F?0:H(A,J)/2,p=F?0:M(A,o)/2,j=F?0:H(A,o)/2,L=(O-(B+p)*(O>0?1:-1))*N,q=(x-(k+j)*(x>0?1:-1))*N;return G(O)<G(x)?O>=0&&0>=x?(W.add({x:D+n,y:C-k}),W.add({x:D+n,y:C+q+n-k}),W.add({x:I+n,y:C+q+n-k}),W.add({x:I+n,y:r+j})):0>=O&&x>=0?(W.add({x:D+n,y:C+k}),W.add({x:D+n,y:C+q+n+k}),W.add({x:I+n,y:C+q+n+k}),W.add({x:I+n,y:r-j})):O>=0&&x>=0?(W.add({x:D+n,y:C+k}),W.add({x:D+n,y:C+q-n+k}),W.add({x:I+n,y:C+q-n+k}),W.add({x:I+n,y:r-j})):(W.add({x:D+n,y:C-k}),W.add({x:D+n,y:C+q-n-k}),W.add({x:I+n,y:C+q-n-k}),W.add({x:I+n,y:r+j})):O>=0&&0>=x?(W.add({x:D+B,y:C+n}),W.add({x:D+L+n+B,y:C+n}),W.add({x:D+L+n+B,y:r+n}),W.add({x:I-p,y:r+n})):0>=O&&x>=0?(W.add({x:D-B,y:C+n}),W.add({x:D+L+n-B,y:C+n}),W.add({x:D+L+n-B,y:r+n}),W.add({x:I+p,y:r+n})):O>=0&&x>=0?(W.add({x:D+B,y:C+n}),W.add({x:D+L-n+B,y:C+n}),W.add({x:D+L-n+B,y:r+n}),W.add({x:I-p,y:r+n})):(W.add({x:D-B,y:C+n}),W.add({x:D+L-n-B,y:C+n}),W.add({x:D+L-n-B,y:r+n}),W.add({x:I+p,y:r+n})),z(W,R)}),h("flex",function(C,v,c){var g=new K,o=C.s("edge.flex")+$(C,c),i=C.s(m),x=C._40I,U=C._41I,F=T(c,C),V=F.x,L=F.y,Q=w(c,C),n=Q.x,I=Q.y,N=n-V,R=I-L,d=i?0:M(c,x)/2,B=i?0:H(c,x)/2,S=i?0:M(c,U)/2,X=i?0:H(c,U)/2,J=N>0?o:-o,O=R>0?o:-o;return G(N)<G(R)?N>=0&&0>=R?(g.add({x:V+v,y:L-B}),g.add({x:V+v,y:L+O+v-B}),g.add({x:n+v,y:I-O+v+X}),g.add({x:n+v,y:I+X})):0>=N&&R>=0?(g.add({x:V+v,y:L+B}),g.add({x:V+v,y:L+O+v+B}),g.add({x:n+v,y:I-O+v-X}),g.add({x:n+v,y:I-X})):N>=0&&R>=0?(g.add({x:V+v,y:L+B}),g.add({x:V+v,y:L+O-v+B}),g.add({x:n+v,y:I-O-v-X}),g.add({x:n+v,y:I-X})):(g.add({x:V+v,y:L-B}),g.add({x:V+v,y:L+O-v-B}),g.add({x:n+v,y:I-O-v+X}),g.add({x:n+v,y:I+X})):N>=0&&0>=R?(g.add({x:V+d,y:L+v}),g.add({x:V+J+v+d,y:L+v}),g.add({x:n-J+v-S,y:I+v}),g.add({x:n-S,y:I+v})):0>=N&&R>=0?(g.add({x:V-d,y:L+v}),g.add({x:V+J+v-d,y:L+v}),g.add({x:n-J+v+S,y:I+v}),g.add({x:n+S,y:I+v})):N>=0&&R>=0?(g.add({x:V+d,y:L+v}),g.add({x:V+J-v+d,y:L+v}),g.add({x:n-J-v-S,y:I+v}),g.add({x:n-S,y:I+v})):(g.add({x:V-d,y:L+v}),g.add({x:V+J-v-d,y:L+v}),g.add({x:n-J-v+S,y:I+v}),g.add({x:n+S,y:I+v})),z(g,C)}),h("extend.east",function(O,A,L){var D=new K,U=O.s(P)+$(O,L),c=O.s(m),V=T(L,O),j=V.x+(c?0:M(L,O._40I)/2),p=V.y,d=w(L,O),t=d.x+(c?0:M(L,O._41I)/2),C=d.y,l=N(j,t)+U;return p>C?(D.add({x:j,y:p+A}),D.add({x:l+A,y:p+A}),D.add({x:l+A,y:C-A}),D.add({x:t,y:C-A})):(D.add({x:j,y:p-A}),D.add({x:l+A,y:p-A}),D.add({x:l+A,y:C+A}),D.add({x:t,y:C+A})),z(D,O)}),h("extend.west",function(t,x,C){var Q=new K,a=t.s(P)+$(t,C),y=t.s(m),W=T(C,t),Z=W.x-(y?0:M(C,t._40I)/2),r=W.y,L=w(C,t),H=L.x-(y?0:M(C,t._41I)/2),q=L.y,b=s(Z,H)-a;return r>q?(Q.add({x:Z,y:r+x}),Q.add({x:b-x,y:r+x}),Q.add({x:b-x,y:q-x}),Q.add({x:H,y:q-x})):(Q.add({x:Z,y:r-x}),Q.add({x:b-x,y:r-x}),Q.add({x:b-x,y:q+x}),Q.add({x:H,y:q+x})),z(Q,t)}),h("extend.north",function(B,t,I){var Q=new K,G=B.s(P)+$(B,I),f=B.s(m),e=T(I,B),l=e.x,X=e.y-(f?0:H(I,B._40I)/2),A=w(I,B),E=A.x,r=A.y-(f?0:H(I,B._41I)/2),J=s(X,r)-G;return l>E?(Q.add({y:X,x:l+t}),Q.add({y:J-t,x:l+t}),Q.add({y:J-t,x:E-t}),Q.add({y:r,x:E-t})):(Q.add({y:X,x:l-t}),Q.add({y:J-t,x:l-t}),Q.add({y:J-t,x:E+t}),Q.add({y:r,x:E+t})),z(Q,B)}),h("extend.south",function(c,l,Y){var d=new K,b=c.s(P)+$(c,Y),W=c.s(m),M=T(Y,c),B=M.x,Z=M.y+(W?0:H(Y,c._40I)/2),a=w(Y,c),X=a.x,Q=a.y+(W?0:H(Y,c._41I)/2),D=N(Z,Q)+b;return B>X?(d.add({y:Z,x:B+l}),d.add({y:D+l,x:B+l}),d.add({y:D+l,x:X-l}),d.add({y:Q,x:X-l})):(d.add({y:Z,x:B-l}),d.add({y:D+l,x:B-l}),d.add({y:D+l,x:X+l}),d.add({y:Q,x:X+l})),z(d,c)});var t=function(m,q,l,t,e){if(t.sort(function(j,A){var i=j.getSourceAgent()===q?j.getTargetAgent():j.getSourceAgent(),v=A.getSourceAgent()===q?A.getTargetAgent():A.getSourceAgent(),P=i.p(),B=v.p();if(l===W||l===f){if(P.y>B.y)return 1;if(P.y<B.y)return-1}else{if(P.x>B.x)return 1;if(P.x<B.x)return-1}return O.sortFunc(j.getId(),A.getId())}),e){for(var h,y,M,j=m.getSourceAgent(),R=m.getTargetAgent(),$=0;$<t.size();$++){var V=t.get($);V.getSourceAgent()===j&&V.getTargetAgent()===R||V.getTargetAgent()===j&&V.getSourceAgent()===R?(y||(y=new K),y.add(V,0)):y?(M||(M=new K),M.add(V)):(h||(h=new K),h.add(V))}t.clear(),h&&t.addAll(h),y&&t.addAll(y),M&&t.addAll(M)}var v=t.indexOf(m),r=t.size(),z=m.s(D);return{side:l,index:v,size:r,offset:-z*(r-1)/2+z*v}},Y=function(A,j,C,S,a){var G=j.s(l);return t(j,C,S,C.getAgentEdges().toList(function(p){return A.isVisible(p)&&p.s(l)===G}),a)},d=function(y,B){var Z=y.getSourceAgent()===B?y.getTargetAgent():y.getSourceAgent(),C=B.p(),Y=Z.p(),L=Y.x-C.x,u=Y.y-C.y;return L>0&&G(u)<=L?f:0>L&&G(u)<=-L?W:u>0&&G(L)<=u?U:c},Q=function(o,x,X){var n=x.s(l),y=d(x,X);return t(x,X,y,X.getAgentEdges().toList(function(p){return o.isVisible(p)&&p.s(l)===n&&d(p,X)===y}))},b=function(V,t){var y=V.getSourceAgent()===t,E=y?V.getTargetAgent():V.getSourceAgent(),P=t.p(),s=E.p();return y?P.y>s.y?c:U:P.x<s.x?f:W},r=function(e,x,W){var p=x.s(l),T=b(x,W);return t(x,W,T,W.getAgentEdges().toList(function(Y){return e.isVisible(Y)&&Y.s(l)===p&&b(Y,W)===T}),T===f||T===U)},p=function(S,N){var s=S.getSourceAgent()===N,m=s?S.getTargetAgent():S.getSourceAgent(),p=N.p(),r=m.p();return s?p.x<r.x?f:W:p.y>r.y?c:U},V=function(B,K,o){var e=K.s(l),g=p(K,o);return t(K,o,g,o.getAgentEdges().toList(function(y){return B.isVisible(y)&&y.s(l)===e&&p(y,o)===g}),g===f||g===U)},Z=function(e,O,u){var Q=e.getSourceAgent(),L=e.getTargetAgent(),a=Q.getId()>L.getId(),T=a?L:Q,V=a?Q:L,$=T.p(),i=V.p(),B=u(O,e,T),A=u(O,e,V),J=e.s(m),y=J?0:M(O,T)/2,d=J?0:M(O,V)/2,k=J?0:H(O,T)/2,r=J?0:H(O,V)/2,X=B.offset,I=A.offset,Z=B.side,x=A.side,R=new K;return Z===c?(R.add({x:$.x+X,y:$.y-k}),R.add({x:$.x+X,y:i.y+I}),x===W?R.add({x:i.x-d,y:i.y+I}):R.add({x:i.x+d,y:i.y+I})):Z===U?(R.add({x:$.x+X,y:$.y+k}),R.add({x:$.x+X,y:i.y+I}),x===W?R.add({x:i.x-d,y:i.y+I}):R.add({x:i.x+d,y:i.y+I})):Z===W?(R.add({x:$.x-y,y:$.y+X}),R.add({x:i.x+I,y:$.y+X}),x===U?R.add({x:i.x+I,y:i.y+r}):R.add({x:i.x+I,y:i.y-r})):Z===f&&(R.add({x:$.x+y,y:$.y+X}),R.add({x:i.x+I,y:$.y+X}),x===U?R.add({x:i.x+I,y:i.y+r}):R.add({x:i.x+I,y:i.y-r})),a&&R.reverse(),z(R,e)};h("ortho2",function(R,C,d){var u,j,x=R.s(m),e=R.s("edge.ortho"),L=R.getSourceAgent(),k=R.getTargetAgent(),Z=L.getId()>k.getId(),q=Z?k:L,o=Z?L:k,n=q.p(),N=o.p(),t=Q(d,R,q),r=Q(d,R,o),T=x?0:M(d,q)/2,S=x?0:H(d,q)/2,V=x?0:M(d,o)/2,v=x?0:H(d,o)/2,J=new K,O=t.offset,I=r.offset,y=t.side;return y===f?(u=N.y>n.y?-O:O,j=n.x+T+(N.x-V-n.x-T)*e,J.add({x:n.x+T,y:n.y+O}),J.add({x:j+u,y:n.y+O}),J.add({x:j+u,y:N.y+I}),J.add({x:N.x-V,y:N.y+I})):y===W?(u=N.y>n.y?-O:O,j=n.x-T-(n.x-T-N.x-V)*e,J.add({x:n.x-T,y:n.y+O}),J.add({x:j-u,y:n.y+O}),J.add({x:j-u,y:N.y+I}),J.add({x:N.x+V,y:N.y+I})):y===U?(u=N.x>n.x?-O:O,j=n.y+S+(N.y-v-n.y-S)*e,J.add({x:n.x+O,y:n.y+S}),J.add({x:n.x+O,y:j+u}),J.add({x:N.x+I,y:j+u}),J.add({x:N.x+I,y:N.y-v})):y===c&&(u=N.x>n.x?-O:O,j=n.y-S-(n.y-S-N.y-v)*e,J.add({x:n.x+O,y:n.y-S}),J.add({x:n.x+O,y:j-u}),J.add({x:N.x+I,y:j-u}),J.add({x:N.x+I,y:N.y+v})),Z&&J.reverse(),z(J,R)},!0),h("flex2",function(q,L,b){var Z,r=q.getSourceAgent(),t=q.getTargetAgent(),s=r.getId()>t.getId(),E=s?t:r,n=s?r:t,g=E.p(),O=n.p(),h=Q(b,q,E),i=Q(b,q,n),R=q.s(m),d=q.s("edge.flex")+(h.size-1)/2*q.s(D),v=R?0:M(b,E)/2,J=R?0:H(b,E)/2,p=R?0:M(b,n)/2,G=R?0:H(b,n)/2,I=new K,a=h.offset,B=i.offset,l=h.side;return l===f?(Z=O.y>g.y?-a:a,I.add({x:g.x+v,y:g.y+a}),I.add({x:g.x+v+d+Z,y:g.y+a}),I.add({x:O.x-p-d+Z,y:O.y+B}),I.add({x:O.x-p,y:O.y+B})):l===W?(Z=O.y>g.y?-a:a,I.add({x:g.x-v,y:g.y+a}),I.add({x:g.x-v-d-Z,y:g.y+a}),I.add({x:O.x+p+d-Z,y:O.y+B}),I.add({x:O.x+p,y:O.y+B})):l===U?(Z=O.x>g.x?-a:a,I.add({x:g.x+a,y:g.y+J}),I.add({x:g.x+a,y:g.y+J+d+Z}),I.add({x:O.x+B,y:O.y-G-d+Z}),I.add({x:O.x+B,y:O.y-G})):l===c&&(Z=O.x>g.x?-a:a,I.add({x:g.x+a,y:g.y-J}),I.add({x:g.x+a,y:g.y-J-d-Z}),I.add({x:O.x+B,y:O.y+G+d-Z}),I.add({x:O.x+B,y:O.y+G})),s&&I.reverse(),z(I,q)},!0),h("extend.north2",function(o,R,y){var a=o.getSourceAgent(),T=o.getTargetAgent(),t=a.getId()>T.getId(),Q=t?T:a,v=t?a:T,r=Q.p(),l=v.p(),w=Y(y,o,Q,c),X=Y(y,o,v,c,!0),n=o.s(m),A=n?0:H(y,Q)/2,B=n?0:H(y,v)/2,u=w.offset,E=X.offset,U=o.s(P)+(w.size-1)/2*o.s(D),Z=s(r.y-A,l.y-B)-U+(r.x<l.x?u:-u),$=new K;return $.add({x:r.x+u,y:r.y-A}),$.add({x:r.x+u,y:Z}),$.add({x:l.x+E,y:Z}),$.add({x:l.x+E,y:l.y-B}),t&&$.reverse(),z($,o)},!0),h("extend.south2",function($,b,_){var u=$.getSourceAgent(),F=$.getTargetAgent(),E=u.getId()>F.getId(),d=E?F:u,t=E?u:F,j=d.p(),w=t.p(),n=Y(_,$,d,U),A=Y(_,$,t,U,!0),W=$.s(m),R=W?0:H(_,d)/2,s=W?0:H(_,t)/2,r=n.offset,T=A.offset,Z=$.s(P)+(n.size-1)/2*$.s(D),J=N(j.y+R,w.y+s)+Z+(j.x>w.x?r:-r),x=new K;return x.add({x:j.x+r,y:j.y+R}),x.add({x:j.x+r,y:J}),x.add({x:w.x+T,y:J}),x.add({x:w.x+T,y:w.y+s}),E&&x.reverse(),z(x,$)},!0),h("extend.west2",function(S,n,N){var G=S.getSourceAgent(),H=S.getTargetAgent(),l=G.getId()>H.getId(),_=l?H:G,g=l?G:H,F=_.p(),C=g.p(),V=Y(N,S,_,c),q=Y(N,S,g,c,!0),A=S.s(m),t=A?0:M(N,_)/2,e=A?0:M(N,g)/2,R=V.offset,Z=q.offset,w=S.s(P)+(V.size-1)/2*S.s(D),i=s(F.x-t,C.x-e)-w+(F.y<C.y?R:-R),h=new K;return h.add({x:F.x-t,y:F.y+R}),h.add({x:i,y:F.y+R}),h.add({x:i,y:C.y+Z}),h.add({x:C.x-e,y:C.y+Z}),l&&h.reverse(),z(h,S)},!0),h("extend.east2",function(X,h,s){var Z=X.getSourceAgent(),v=X.getTargetAgent(),f=Z.getId()>v.getId(),b=f?v:Z,x=f?Z:v,n=b.p(),E=x.p(),I=Y(s,X,b,c),O=Y(s,X,x,c,!0),W=X.s(m),o=W?0:M(s,b)/2,e=W?0:M(s,x)/2,l=I.offset,L=O.offset,J=X.s(P)+(I.size-1)/2*X.s(D),w=N(n.x+o,E.x+e)+J+(n.y>E.y?l:-l),R=new K;return R.add({x:n.x+o,y:n.y+l}),R.add({x:w,y:n.y+l}),R.add({x:w,y:E.y+L}),R.add({x:E.x+e,y:E.y+L}),f&&R.reverse(),z(R,X)},!0),h("v.h2",function(p,e,v){return Z(p,v,r)},!0),h("h.v2",function(d,q,F){return Z(d,F,V)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);