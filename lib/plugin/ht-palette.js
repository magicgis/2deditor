!function(u,_,v){"use strict";var I="px",H="0",k="innerHTML",$="className",C=ht.Default,G=ht.Color,U=ht.Node,e="position",i="top",Y="left",P=C.animate,h=C.getInternal(),n="width",H="0",g="none",j="max-height",a="font",O="background",V="border-box",A="user-select",K="box-sizing",Q="overflow",X=C.isTouchable,h=C.getInternal(),N=G.titleIconBackground,f=C.scrollBarInteractiveSize,L=/msie 9/.test(u.navigator?u.navigator.userAgent.toLowerCase():""),B=null,w=function(){return document},D=function(f){return w().createElement(f)},M=function(){return D("div")},F=function(){var e=M(),C=e.style;return C.msTouchAction=g,C.cursor="default",X&&C.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",B),C.position="absolute",C.left=H,C.top=H,e},m=function(){return D("canvas")},W=function(){return document.body},E=function(L,U,h){L.style.setProperty(U,h,B)},q=function(J,O){J.style.removeProperty(O)},r=function(H,c,W){C.def(ht.widget[H],c,W)},t=function(B,l){B.appendChild(l)},l=function(h,q){h.removeChild(q)},x=C.eventListenerOptionsFalse,c=(C.eventListenerOptionsTrue,function(y,t,w,E){y.addEventListener(t,w,E?x:x)});h.addMethod(C,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:N,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:N}]},paletteTitleLabelColor:C.labelSelectColor,paletteTitleLabelFont:C.labelFont,paletteContentLabelFont:C.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:C.widgetTitleHeight,paletteTitleBackground:G.titleBackground,paletteTitleHoverBackground:G.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:v,paletteItemHoverBorderColor:G.highlight,paletteItemSelectBackground:G.highlight},!0);var o=".palette-item:hover{border: 1px solid "+C.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+C.paletteTitleHoverBackground+" !important}",R=document.createElement("style");X||(R.styleSheet?R.styleSheet.cssText=o:R.appendChild(w().createTextNode(o))),w().getElementsByTagName("head")[0].appendChild(R);var s=function(e){var U=this;U.$22h=e,U.addListeners()};C.def(s,_,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var Z=this;Z.$36h&&W().removeChild(Z.$36h),Z.$23h=Z.$24h=Z.$25h=Z.$35h=Z.$36h=B},handle_touchstart:function(o){for(var G,P=this,f=P.$22h,n=o.target,e=f.sm(),q=f.dm(),T="palette-header",x="palette-header-tool",i="palette-item",y=!1,m=!1,b=!1;n&&(n[$]||"").indexOf(T)<0&&(n[$]||"").indexOf(i)<0;)n=n.parentNode;if(n&&n[$].indexOf(x)>=0?y=!0:n&&n[$].indexOf(T)>=0?b=!0:n&&n[$].indexOf(i)>=0&&(m=!0),C.isLeftButton(o))if(P.$27h(o))P.$24h=C.getClientPoint(o),P.$25h=f.ty();else if(y){C.preventDefault(o),G=n.parentNode.$11h;var O=q.getDataById(G),t=O.s("tools")[n.toolIndex];t.action&&t.action.call(f)}else if(b){C.preventDefault(o),G=n.$11h;var O=q.getDataById(G);O.isExpanded()?O.setExpanded(!1):O.setExpanded(!0)}else if(m){G=n.$11h;var Y=q.getDataById(G);e.ss(Y),f.handleDragAndDrop&&(C.preventDefault(o),Y.s("draggable")&&(f.handleDragAndDrop(o,"prepare"),P.$35h=0)),Y.s("draggable")||(C.preventDefault(o),P.$24h=C.getClientPoint(o),P.$25h=f.ty())}else C.preventDefault(o),P.$24h=C.getClientPoint(o),P.$25h=f.ty();else P.$26h(o)},handle_mousedown:function(j){this.handle_touchstart(j)},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40,t.wheelDelta!==t.wheelDeltaX)},handle_DOMMouseScroll:function(N){this.handleScroll(N,-N.detail,1)},handleScroll:function(A,w,p){var S=this.$22h;C.preventDefault(A),p&&S._41o()&&S.ty(S.ty()+20*w)},handle_mouseup:function(B){this.handle_touchend(B)},handle_touchend:function(O){var g=this;g.$37h(O),g.$26h(O)},handleWindowMouseUp:function(K){this.handleWindowTouchEnd(K)},handleWindowTouchEnd:function(E){var H=this;H.$37h(E),H.$26h(E)},$37h:function(c){var V=this,R=V.$22h;2===V.$35h&&(V.$35h=3,R.handleDragAndDrop(c,"end"))},handleWindowMouseMove:function(v){this.handleWindowTouchMove(v)},handleWindowTouchMove:function(q){var p=this,t=p.$22h,x=p.$23h,h=p.$24h,u=p.$25h,B=C.getClientPoint(q),l=t._29I,i=p.$36h;if(1===p.$35h||2===p.$35h){if(p.$35h=2,t.handleDragAndDrop(q,"between"),X){var k=q.touches[0];q=k?k:q.changedTouches[0]}i.style.left=q.pageX-parseInt(i.width)/2+I,i.style.top=q.pageY-parseInt(i.height)/2+I}else"p"===x?t.ty(u+B.y-h.y):"v"===x&&t.ty(u+(h.y-B.y)/l.height*t._59I)},handle_mousemove:function(q){this.handle_touchmove(q)},handle_touchmove:function(P){if(!C.isDragging()&&C.isLeftButton(P)){var S=this,l=S.$22h,x=S.$27h(P);if(S.$24h){if(!S.$23h){if(C.getDistance(C.getClientPoint(P),S.$24h)<2)return;S.$23h=x?"v":"p",C.startDragging(S)}}else if(x)l._43o();else if(0===S.$35h){if(S.$35h=1,l.handleDragAndDrop(P,"begin"),X){var n=P.touches[0];P=n?n:P.changedTouches[0]}var K=S.$36h=new Image,O=l.$10h[l.sm().ld().getId()].querySelector(".image-box"),Z=parseInt(O.style.width),s=parseInt(O.style.height);K.draggable=!1,K.src=O.toDataURL(),K.width=Z,K.height=s,K.style.position="absolute",K.style.left=P.pageX-Z/2+I,K.style.top=P.pageY-s/2+I,W().appendChild(K),C.startDragging(S)}}},$27h:function(t){var U=this.$22h,e=U.getView(),G=e.getBoundingClientRect(),Q=U._29I,o=t.clientX-G.left+e.scrollLeft;return U._41o()&&Q.x+Q.width-o<f}}),ht.widget.Palette=function(G){var o=this,l=o._view=h.createView(null,o);o.$9h={},o.$10h={},o.$4h={},o._29I={x:0,y:0,width:0,height:0},o._59I=0,o.dm(G?G:new ht.DataModel),l[$]="ht-widget-palette",o.$29h=new s(o),E(l,O,C.paletteContentBackground),E(l,Q,"auto"),E(l,K,V),E(l,"-moz-"+K,V),E(l,"-webkit-"+A,g),E(l,"-moz-"+A,g),E(l,"-ms-"+A,g),E(l,A,g),E(l,"position","absolute"),E(l,"overflow","hidden"),t(l,o._79O=F()),c(l,"dragstart",function(y){y.dataTransfer&&(y.dataTransfer.setData("Text","nodeid:"+y.target.$11h),y.dataTransfer.effectAllowed="all",o.$29h.$26h())})},r("Palette",_,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:C.autoHideScrollBar,_scrollBarSize:C.scrollBarSize,_scrollBarColor:C.scrollBarColor,getViewRect:function(){return this._29I},ty:function(C){return C==B?this.getTranslateY():(this.setTranslateY(C),void 0)},setTranslateY:function(m){if(this.$32h==B){var A=this,T=A.$33h(m),Q=A.$30h;A.$30h=T,A.fp("translateY",Q,T)}},getTranslateY:function(){return this.$30h},setLayout:function(j){var K,Z,D=this,m=D._layout;D._layout=j,"smallicons"===j?K=Z=20:"iconsonly"===j?K=Z=50:(K=70,Z=50),D.setItemImageWidth(K),D.setItemImageHeight(Z),D.setItemImagePadding(4),D.fp("layout",m,j)},getDataAt:function(I){for(var z=I.target;z&&z.$11h==B;)z=z.parentNode;return z&&z.$11h!=B?this.getDataModel().getDataById(z.$11h):void 0},$20h:function(){var s=16;return X&&(s*=1.2),s},$19h:function(){return C.paletteTitleHeight},$18h:function(){var m=C.paletteSeparatorWidth,M=C.paletteTitleBackground,L=C.paletteSeparatorColor||C.brighter(M);return m+I+" solid "+L},$17h:function(r){E(r,"cursor","pointer"),E(r,"display","inline-block"),E(r,"margin-right",(X?8:4)+I),E(r,"vertical-align",i)},$1h:function(q){var f=this,l=M(),L=M(),G=D("span");l[$]="palette-header",E(l,e,"relative"),E(l,O,C.paletteTitleBackground),E(l,"color",C.paletteTitleLabelColor),E(l,i,H),E(l,K,V),E(l,"-moz-"+K,V),E(l,"padding","0 5px 0 0"),E(l,"border-top",f.$18h()),E(l,n,"100%"),E(l,"cursor","pointer"),E(l,"white-space","nowrap"),E(l,Q,"hidden"),E(l,a,C.paletteTitleLabelFont),E(l,"line-height",f.$19h()+I),l.$11h=q.getId();var A=m(),r=f.$19h(),g=f.$20h();f.$17h(A),h.setCanvas(A,g,r),t(l,A);var B=q.s("tools");if(B)for(var X=0;X<B.length;X++){var U=m();f.$17h(U),h.setCanvas(U,g,r),U[$]="palette-header-tool palette-header-tool"+q.getId()+"-"+X,U.style.position="absolute",U.style.right=(g+10)*X+"px",U.toolIndex=X,t(l,U)}return A[$]="palette-toggle-icon-"+q.getId(),L[$]="palette-content",E(L,"max-height",0+I),E(L,a,C.paletteContentLabelFont),E(L,Q,"hidden"),L.$11h=q.getId(),f.$9h[q.getId()]=L,G[k]=q.getName(),E(G,a,C.paletteTitleLabelFont),t(l,A),t(l,G),[l,L]},$2h:function(J){var K=this,c=K._layout,X=L&&J.s("draggable")?D("a"):M(),S=m(),y=M(),V=J.getName()||"",O=J.s("title")||J.getToolTip()||V,n=K._itemMargin;S[$]="image-box";var s=K.getItemImageWidth(),W=K.getItemImageHeight();return h.setCanvas(S,s,W),t(X,S),y[k]=V,y[$]="label-box","iconsonly"!==c&&t(X,y),X[$]="palette-item",E(X,"vertical-align",i),E(X,"cursor","pointer"),E(X,"border-radius",5+I),E(X,"border","1px solid transparent"),E(X,"text-align","center"),E(X,"display","inline-block"),E(X,"margin-left",n+I),E(X,"margin-top",n+I),E(X,"color",C.paletteContentLabelColor),"smallicons"===c?(E(S,"vertical-align","middle"),E(X,"margin-left",2+I),E(X,"margin-top",2+I),E(X,"padding",2+I),E(X,"text-align",Y),E(y,"display","inline-block"),E(y,"min-width",K.$21h+K._itemMargin+I)):"largeicons"===c&&(E(y,"max-width",s+I),E(y,"overflow","hidden")),X.$11h=J.getId(),O&&(X.title=O),J.s("draggable")&&!K.handleDragAndDrop&&(L?(X.href="#",E(X,"text-decoration",g)):X.draggable="true"),X},$16h:function(W,q,r,c){var A=h.initContext(W);h.translateAndScale(A,0,0,1),A.clearRect(0,0,r,r);var g=(r-c)/2;C.drawStretchImage(A,C.getImage(q),"fill",0,g,c,c),A.restore()},$15h:function(t){var y=this,k=t.getId(),M=y._view.querySelector(".palette-toggle-icon-"+k),z=t.isExpanded()?C.paletteCollapseIcon:C.paletteExpandIcon;if(M&&z){var F=y.$19h(),L=y.$20h();y.$16h(M,z,F,L)}},_drawToolsIcon:function(L){var R=this,Y=L.s("tools");if(Y)for(var H=0;H<Y.length;H++){var j=R._view.querySelector(".palette-header-tool"+L.getId()+"-"+H),B=Y[H].icon,c=R.$19h(),z=R.$20h();R.$16h(j,B,c,z)}},$14h:function(_){var q=this,S=_.getId(),c=q.$10h[S].querySelector(".image-box"),v=_.getImage(),O=_.s("image.stretch");if(c&&v){var P=h.initContext(c),W=q.getItemImagePadding();W="smallicons"===q._layout?W/2:W;var D=q.getItemImageWidth()-2*W,I=q.getItemImageHeight()-2*W;h.translateAndScale(P,0,0,1),P.clearRect(0,0,D,I),C.drawStretchImage(P,C.getImage(v),O,W,W,D,I,_,q),P.restore()}},validateImpl:function(){var $,v,_,b=this,p=b.$9h,O=b._layout,K=b.$10h,J=b.$4h,u=b._view,w=b.dm();if(b.$13h&&(delete b.$13h,J={},w.each(function(D){J[D.getId()]=D})),"smallicons"===O)for(var o in J){var R=J[o];if(R instanceof U){var z=R.getName()||"",g=C.getTextSize(C.paletteContentLabelFont,z).width;b.$21h!=B&&b.$21h>g||(b.$21h=g)}}for(var o in J){_=J[o];var s,x;if(w.contains(_)){if(_ instanceof ht.Group){var c,n=b.$1h(_),d=K[_.getId()];d&&(c=d.nextSibling,l(u,c),l(u,d)),v=w.getSiblings(_).indexOf(_);var G=u.children[2*v]||b._79O;G&&G.parentNode?(u.insertBefore(n[0],G),u.insertBefore(c||n[1],G)):(u.appendChild(n[0]),u.appendChild(c||n[1])),K[_.getId()]=n[0],$=p[_.getId()]=c||n[1],x=_.$12h;var y=_.s("promptText");x||(_.$12h=D("div"),_.$12h[k]=y||"",x=_.$12h),0===_.getChildren().size()?$.contains(x)||t($,x):$.contains(x)&&l($,x)}else if(s=_.getParent()){var A=b.$2h(_),X=K[_.getId()];$=p[s.getId()],X&&l(X.parentNode,X),v=w.getSiblings(_).indexOf(_);var q=$.children[v];q?$.insertBefore(A,q):t($,A),K[_.getId()]=A,b.$14h(_)}}else{var N=K[_.getId()],Y=N.parentNode;if(_ instanceof ht.Group){var F=N.nextSibling;l(u,N),l(u,F),delete p[_.getId()]}else l(Y,N),0===Y.children.length&&(s=w.getDataById(Y.$11h),s&&(x=s.$12h,x&&!Y.contains(x)&&t(Y,x)));delete K[_.getId()]}}b.$4h={};var M=function(){var z=b._59I,w=0;b.$32h!=B&&(clearInterval(b.$32h),w=0,delete b.$32h),b.$32h=setInterval(function(){b.$31h(),z===b._59I?(w++,w>=2&&(clearInterval(b.$32h),delete b.$32h)):(w=0,z=b._59I)},30)};for(var a in p)if($=p[a],_=w.getDataById(p[a].$11h),b.$15h(_),b._drawToolsIcon(_),_.isExpanded()){if($.style.maxHeight===0+I){var m=$.scrollHeight+b._itemMargin+I;P($).duration(200).set(j,m).set("padding-bottom",b._itemMargin+I).end(function(){return function(){M()}}(m))}else $.style.maxHeight=$.scrollHeight+I;$.style.paddingBottom=b._itemMargin+I}else $.style.maxHeight!==0+I&&P($).duration(200).set(j,H).set("padding-bottom",H).end(function(){return function(){M()}}($));b.$28h(),b.$31h()},$31h:function(){for(var g=this,h=g._view,K=0,Z=h.children,S=0;S<Z.length;S++){var J=Z[S];J.className&&J.className.indexOf("palette-")>=0&&(K+=J.offsetHeight)}g._59I=K,g.$30h=g.$33h(g.ty());var X=g.ty();h.scrollTop=-X,g._29I={x:0,y:-X,width:h.clientWidth,height:h.clientHeight},E(g._79O,i,-X+I),g._93I()},$33h:function(h){var n=this,M=n._29I.height-n._59I;return M>h&&(h=M),h>0?0:Math.round(h)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(A){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(A.property)<0&&this.redraw(),"translateY"===A.property&&(this.iv(),this._43o())},findDataByName:function(m){for(var n=this.dm().getDatas(),S=0;S<n.size();S++){var g=n.get(S);if(g.getName()===m)return g}},setDataModel:function(i){var T=this,Y=T._dataModel,s=T._selectionModel;Y!==i&&(Y&&(Y.umm(T.$6h,T),Y.umd(T.$8h,T),Y.umh(T.$7h,T),s||Y.sm().ums(T.$28h,T)),T._dataModel=i,i.mm(T.$6h,T),i.md(T.$8h,T),i.mh(T.$7h,T),s?s._21I(i):i.sm().ms(T.$28h,T),T.sm().setSelectionMode("single"),T.fp("dataModel",Y,i))},$6h:function(S){var L=this,h=L._view,O=S.data,m=L.$4h;"add"===S.kind?m[O.getId()]=O:"remove"===S.kind?m[O.getId()]=O:"clear"===S.kind&&(L.$10h={},L.$9h={},L.$4h={},h[k]=""),L.iv()},$7h:function(D){var b=this,X=D.data;b.$4h[X.getId()]=X,b.iv()},$8h:function(E){var n=this,j=E.data,y=E.property;"expanded"===y?n.iv():(n.$4h[j.getId()]=j,n.iv())},$28h:function(){var h,o=this,c=o.sm(),n="palette-item",T=c.ld();this.dm().each(function(H){h=o.$10h[H.getId()],h&&h[$].indexOf(n)>=0&&(H===T?E(h,O,C.paletteItemSelectBackground):q(h,O))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);